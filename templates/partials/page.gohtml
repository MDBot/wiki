{{- /*gotype: github.com/greboid/wiki.CommonPageArgs*/ -}}
{{define "header"}}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>{{.PageTitle}} &middot; Wiki</title>
        <link rel="stylesheet" href="/res/style.css" type="text/css"/>
    </head>
    <body>
        <header class="container">
            <h1>
                {{.PageTitle}}
            </h1>
            <nav>
                {{if and .IsWikiPage .Session.CanEdit}}
                    <a href="/edit/{{.PageTitle}}">Edit</a>
                {{end}}
                {{if .IsWikiPage}}
                    <a href="/history/{{.PageTitle}}">History</a>
                {{end}}
            </nav>
            <div class="login">
                {{if .Session.User}}
                    Logged in as {{.Session.User.Name}}
                {{else}}
                    <form action="/wiki/login" method="post">
                        <input type="hidden" name="redirect" value="/view/MainPage">
                        <input type="text" name="username" placeholder="Username">
                        <input type="password" name="password" placeholder="Password">
                        <input type="submit" value="Login">
                    </form>
                {{end}}
            </div>
        </header>

        {{if .Session.Error}}
            <aside class="error">{{.Session.Error}}</aside>
        {{end}}

        <main class="container content">
            {{end}}

            {{define "footer"}}
        </main>

        <footer>
            <div class="container">
                {{if .LastModified}}
                    Last modified at {{.LastModified.Time.Format "Jan 02, 2006 15:04:05 UTC"}}
                    by {{.LastModified.User}}
                {{else}}
                    Hello, I'm a footer. Nice to meet you.
                {{end}}
            </div>
        </footer>
        <script defer src="/mathjax/mathjax-config.js"></script>
    </body>
</html>
{{end}}
